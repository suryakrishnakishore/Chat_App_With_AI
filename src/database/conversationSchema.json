{
    "$jsonSchema": {
        "bsonType": "object",
        "required": [
            "participants",
            "chatType",
            "createdAt",
            "updatedAt"
        ],
        "properties": {
            "_id": {
                "bsonType": "objectId",
                "description": "Unique ID of the chat (auto-generated by MongoDB)."
            },
            "participants": {
                "bsonType": "array",
                "minItems": 2,
                "items": {
                    "bsonType": "objectId"
                },
                "description": "User ObjectIds participating in the chat (2+ for private/group/channel)."
            },
            "chatType": {
                "enum": [
                    "private",
                    "group",
                    "channel"
                ],
                "description": "Type of chat conversation."
            },
            "chatName": {
                "bsonType": [
                    "string",
                    "null"
                ],
                "description": "Group/Channel name (null for private chats)."
            },
            "chatImage": {
                "bsonType": [
                    "string",
                    "null"
                ],
                "description": "Group/Channel avatar (null for private chats)."
            },
            "lastMessage": {
                "bsonType": [
                    "object",
                    "null"
                ],
                "properties": {
                    "messageId": {
                        "bsonType": "objectId"
                    },
                    "content": {
                        "bsonType": [
                            "string",
                            "null"
                        ]
                    },
                    "messageType": {
                        "enum": [
                            "text",
                            "image",
                            "video",
                            "audio",
                            "file",
                            "location",
                            "contact"
                        ]
                    },
                    "timestamp": {
                        "bsonType": "date"
                    },
                    "senderId": {
                        "bsonType": "objectId"
                    }
                },
                "description": "Latest message preview displayed in chat list."
            },
            "createdAt": {
                "bsonType": "date",
                "description": "Timestamp when the chat was created."
            },
            "updatedAt": {
                "bsonType": "date",
                "description": "Timestamp of the last message or last activity."
            },
            "settings": {
                "bsonType": [
                    "object",
                    "null"
                ],
                "properties": {
                    "isGroupJoinApprovalRequired": {
                        "bsonType": [
                            "bool",
                            "null"
                        ]
                    },
                    "allowForwarding": {
                        "bsonType": [
                            "bool",
                            "null"
                        ]
                    }
                },
                "description": "Optional settings for group/channel chats."
            }
        }
    }
}